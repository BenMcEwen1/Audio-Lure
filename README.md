# Audio Lure

Intended for use on a Raspberry Pi (Development and testing using a Raspberry Pi 3 Model B)

## Microphone Specification and Setup
Full documentation on the Seeedstudio wiki:
https://wiki.seeedstudio.com/ReSpeaker_Mic_Array_v2.0/

This implementation is a more bare bones version of the code provided by the supplier.
The relevant steps include:
* Configuration of 6 channel firmware
* Configuration of Direction of Arrival (DOA)

## Install
Development and testing using Python verison: 2.7.16
```
pip install -r requirements.txt
```

## Scripts:
#### Run.py
Runs all of the scripts in the correct order. 
```
sudo python run.py
```
#### lure.py
Selects an audio files from the pool of available audio files as configured by the user. If species and/or calltype are not specified then the script will randomly select one.
Plays the selected audio file
#### record.py
Generates audio and DOA filenames given location, calltype, date and time info
Records for audio for 60 seconds and DOA information. Stores files using filenames generated by filename()
#### upload.py
Upload the audio recording to the Cacophony server using the API documentated here: https://api.cacophony.org.nz/
Upload the DOA info by storing it as 'additionalMetaData'

##### LED Ring 
Useful for testing. Currently configured to spin when selecting and playing audio lure and display DOA when recording. This should be tured off in the field by running:
```python
from led import spin, listen, on, off
off()
```

### Debugging
* Make sure you check the index of the device. The device index could be different between devices and may need to be changed.
* Install the correct firmware onto the device using the DFU.py script using --download 6_channels_firmware.bin

## Cacophony Project
This work contributes to https://github.com/TheCacophonyProject
